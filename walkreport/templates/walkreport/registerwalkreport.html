{% extends "app/layout.html" %}
{% load staticfiles %}
{% block content %}

<div class="container">
    <form action="">
        {% csrf_token %}

        <h2 class="title-page">{{ title }}</h2>

        {#Antecedentes generales del informe de caminata#}
        <h3 class="section-title"> ANTECEDENTES GENERALES </h3>
        <div class="row">
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">N° de API:</label>
                        <select name="api" id="ant-api-walk" class="form-control" required>
                            <option disabled selected>Seleccione API</option>
                            {% for api in apis %}
                            <option id="{{api.id}}" value="{{api.id}}">{{ api.project_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Nombre del Proyecto:</label>
                        <label class="form-label" name="project_name"></label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">N° de Contrato:</label>
                        <select name="contract" class="form-control" id="ant-contract-walk" required>
                        </select>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Empresa Contratista:</label>
                        <label name="enterprise"></label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Area:</label>
                        <select name="area" class="form-control" id="ant-wbs-walk" required>
                            <option disabled selected>Seleccione Area</option>
                            {% for wb in wbs %}
                            <option id="{{wb.id}}" value="{{wb.id}}">{{ wb.wbs_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">WBS: </label>
                        <label name="wbs"></label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Fecha de Inicio:</label>
                        <label name="start_date"></label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Fecha de Termino:</label>
                        <label name="finish_date"></label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Sistema: </label>
                        <input class="form-control" id="ant-sistem-walk">

                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Caminata N°: </label>
                        <input class="form-control" id="ant-numwalk-walk">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">TOP: </label>
                        <input class="form-control" id="ant-top-walk">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Sub Sistema: </label>
                        <input class="form-control" id="ant-subsistem-walk">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="field-form">
                        <label class="form-label">Fecha y Hora: </label>
                        <input type="date" class="form-control" id="ant-date-walk">
                    </div>
                </div>           
            </div>
        </div>

       <h2 class="title-page">{{ title }}</h2>
       <h3 class="section-title"> CONTROL DE OBSERVACIONES EN CAMINATA </h3>
       <h4 class="subsection-title"> REGISTRO DE OBSERVACIONES REALIZADAS EN TERRENO </h4>

       <div class="row">
            <div class="row g-3">
                <div class="col-md-12">
                    <label class="form-label">Descripcion Accion Pendiente:</label>
                    <input type="text" id="con-desc-walk" class="form-control">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Ubicación:</label>
                    <input name="ubication" class="form-control" id="con-place-walk" required>
                </div>       
                
                <div class="col-md-4">
                    <label class="form-label">N de Plano:</label>
                    <input name="plane" class="form-control" id="con-plane-walk" required>
                </div>         

                <div class="col-md-4">
                    <label class="form-label">Codigo de Equipo:</label>
                    <input name="equipment" class="form-control" id="con-equicode-walk" required>
                </div>        
                
                <div class="col-md-4">
                    <label class="form-label">Disciplina:</label>
                    <select name="discipline" class="form-control" id="con-disci-walk" required>
                                <option disabled selected>Seleccione Disciplina </option>
                        {% for discipline in disciplines %}
                        <option id="{{discipline.id}}" value="{{discipline.id}}">{{ discipline.discipline_name }}</option>
                        {% endfor %}
                    </select>
                </div>         
                <div class="col-md-4">
                    <label class="form-label">Originado por:</label>
                    <div class="select-a-container">
                        <select name="origin" class="form-control" id="con-origin-walk" required>
                            <option disabled selected>Seleccione Originador </option>
                            {% for user in users %}
                            <option id="{{user.id}}" value="{{user.id}}">{{ user.first_name }}</option>
                            {% endfor %}
                        </select>
                        <a class="glyphicon glyphicon-plus" onclick="abrir_modal_registro();"></a>
                    </div>

                </div>           
                <div class="col-md-4">
                    <label class="form-label">Resp. Construcción:</label>
                    <div class="select-a-container">
                        <select name="responsable" class="form-control" id="con-rescon-walk" required>
                            <option disabled selected>Seleccione Responsable </option>
                            {% for user in extern_users %}
                            <option id="{{user.id}}" value="{{user.id}}">{{ user.first_name }}</option>
                            {% endfor %}
                        </select>
                        <a onclick="abrir_modal_registro();">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus" viewBox="0 0 16 16">
                              <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                              <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
                            </svg>
                        </a>
                    </div>

                </div>        
                <div class="col-md-4">
                    <label class="form-label">Lider Caminata:</label>
                    <div class="select-a-container">
                        <select name="leader" class="form-control" id="con-lider-walk" required>
                            <option disabled selected>Seleccione Lider </option>
                            {% for user in extern_users %}
                            <option id="{{user.id}}" value="{{user.id}}">{{ user.first_name }}</option>
                            {% endfor %}
                        </select>
                        <a onclick="abrir_modal_registro();">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus" viewBox="0 0 16 16">
                                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
                            </svg>
                        </a>
                    </div>

                </div>        
                <div class="col-md-4">
                    <label class="form-label">Prioridad:</label>
                    <select name="priority" class="form-control" id="con-priority-walk" required>
                        <option disabled selected>Seleccione Prioridad </option>
                        {% for priority in priorities %}
                        <option id="{{priority.id}}" value="{{priority.id}}">{{ priority.priority_name }}</option>
                        {% endfor %}
                    </select>
                </div>         
                <div class="col-md-4">
                    <label class="form-label">Fecha de Compromiso de Cierre:</label>
                    <input type="date" name="date_close" class="form-control" id="con-cierre-walk" required>
                </div>        
                <div class="col-md-4">
                    <label class="form-label">Fecha de Cierre Real:</label>
                    <input type="date" name="date_close_real" class="form-control" id="con-cierrereal-walk" required>
                </div>
            </div> 
       </div>

        <div class="btn-save">
            <input id="btn_add_walk" class="btn btn-danger" type="button" value="Agregar"/>
        </div>

        <div class="separator"></div>

        <div class="col-md-12 d-flex justify-content-center">
            <table class="display table table-hover table-responsive table-bordered border-secundary" width="100%" id="">
                <thead>
                    <tr>
                        <th>Ubicacion</th>
                        <th>Codigo Equipo</th>
                        <th>N Plano</th>
                        <th>Disciplina</th>
                        <th>Descripcion</th>
                        <th>Originado por</th>
                        <th>Resp.Construccion</th>
                        <th>Lider Caminata</th>
                        <th>Prioridad</th>
                        <th>Fecha Cierre</th>
                        <th>Fecha Cierre Real</th>
                        <th>¿Eliminar?</th>
                    </tr>
                </thead>
                <tbody id="tbody-walk">

                </tbody>
            </table>
        </div>
       <h2 class="title-page">{{ title }}</h2>
       <h3 class="section-title"> ARCHIVOS ADJUNTOS </h3>
        <div class="row">
            <div class="col-md-12 form-report">
                <div class="field-form">
                    <input class="form-control" id="file_walk" type="file" value="Subir Archivo" multiple/>
                </div>
            </div>
        </div>

        <div class="separator"></div>

        <div class="btn-save">
                <input id="btn_save_walk_report" class="btn btn-danger" type="button" value="Guardar"/>
        </div>    
        <!--
        <div class="btn-save">
                <a href="{% url 'createwalkpdf' %}" class="btn btn-danger">PDF</a>
        </div>
        -->
        <script src="{% static 'app/scripts/walkreport-scripts/registerwalkreport.js' %}"></script>
        <script src="{% static 'app/scripts/common-scripts/selectprojectapi.js' %}"></script>
        <script src="{% static 'app/scripts/common-scripts/searchcontractinfo.js' %}"></script>

    </form>

</div>

<div class="modal fade" id="registro" role="dialog">
    
</div>

{% endblock %}